import"./CWj6FrbW.js";import"./BaCqQUOQ.js";import{t as f,s as o,f as y,b as i,e as s,r as n,n as t}from"./DoEgfuwQ.js";import{h as $}from"./CKrLjoKW.js";import{l as A,s as M}from"./eyEfEEVO.js";import{L as B}from"./DTlTuUsZ.js";import{B as P}from"./BUVtvDqQ.js";import{I as d}from"./BAKXVhBz.js";const r={weekNumber:2908,description:"又是忙碌的一周～",date:"2025-09-27T06:15:00.000Z",author:"Xuancong Meng",tags:["Develop Diary","Technique"],layout:"logs"},{weekNumber:Z,description:K,date:q,author:D,tags:W,layout:X}=r;var x=f("<p>对于搭配的西文字体，个人推荐 Ysabeau 系列字体。另有 Ysabeau Office 与霞鹜文楷轻便版的合并字体 LXGW Bright，采用 字体合并补全工具 将两款字体合并而成。亦有中英文合并的等宽字体 LXGW Bright Code，采用 Monaspace Argon 经缩窄调整后与霞鹜文楷轻便版合并而成。</p>"),E=f('<p><a href="/logs/0xB5A">Malloc Lab 终于完成了</a> 🎉</p> <h2 id="人一忙起来就会忙起来"><a class="anchor-link not-prose" href="#人一忙起来就会忙起来">人一忙起来就会忙起来</a></h2> <p>标题很废话，但好像就是这样，<del>我也太贱了</del>。这一周来都比较忙碌，发生的事情很多。有意思的是，在我平时休息时间大幅减少的情况下，反而更容易将余下的休息时间用来学习？</p> <p>正因为此 Malloc Lab 才得以完成 😂 还有最后三章整本 CS:APP 就啃完了，希望可以一鼓作气 ☝️🤓</p> <h2 id="ok-go-发布新专辑"><a class="anchor-link not-prose" href="#ok-go-发布新专辑">OK Go 发布新专辑</a></h2> <p>乐队 OK Go 发布了新专辑 And the Adjacent Possible，其中第一首歌的 MV 很令人印象深刻：</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/fwzbIUffcR4?si=eVskIeIPkwuTYZQu" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" class="video"></iframe> <p>看到的第一眼还以为是什么 MV 拍摄幕后花絮，后来发现好像就是正片 。OK Go 的松弛感以及天马行空的想象力，也许就是我喜欢的原因吧。「这个乐队的 MV 很有意思」何尝不是一种有力的营销 👀</p> <h2 id="本站的西文字体终于不像一坨狗屎了"><a class="anchor-link not-prose" href="#本站的西文字体终于不像一坨狗屎了">本站的西文字体终于不像一坨狗屎了</a></h2> <p><del>标题依旧长难句。</del></p> <p>更换了本站的西文字体，使用的是 <a href="https://fonts.google.com/specimen/Ysabeau" rel="nofollow">Ysabeau</a>，一款气质和 <a href="https://github.com/lxgw/LxgwWenKai" rel="nofollow">霞鹜文楷</a><sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> 气质很相近的字体。事实上，官方就是这么推荐的：</p> <!> <p>一开始本站使用的就是由官方提供的合并版本，但由于合并的版本没有<a href="https://github.com/w3c/clreq/issues/221#issuecomment-508055215" rel="nofollow">标点挤压</a>，故草率的直接使用了没有合并的官方版本，沿用至今。所以之前用的西文字体一直是霞鹜文楷自己设计的西文字体，看起来很难受。现在修改为直接在网站引用 Ysabeau ，通过 <code>fallback</code> 特性让整体看起来和谐且保留标点挤压等特性。</p> <h2 id="返回现在更智能了"><a class="anchor-link not-prose" href="#返回现在更智能了">返回现在更智能了</a></h2> <p>如果你留意的话，会发现在文章页面滚动一定量后，页面的 Header 部分会展示标题，且鼠标放上去后会显示一个小小的返回按钮（小箭头出现的特效我特别喜欢，甚至还有一点点形变🤓）。</p> <p>这次我修改了一下返回的逻辑，且其细节处理我认为非常值得和你唠唠：</p> <p>之前返回按钮用的是浏览器原生的 <code>history.back()</code>。但它有个问题：如果从 <code>/foo</code> 跳到 <code>/bar</code>，再切到 <code>/bar#anchor</code>，点击返回时只会停在 <code>/bar</code>，而不是回到预期的 <code>/foo</code>。</p> <p>为了解决这个，我实现了一个「严格意义上的返回」功能：只在真正跨页面跳转时才记录历史，锚点变化不计入其中。这样 <code>/foo</code> → <code>/bar</code> → <code>/bar#anchor</code> 时，返回就能正确回到 <code>/foo</code>。</p> <p>比较有意思的是考虑到了浏览器自带的返回按钮（比如手势后退）。为了保持一致性，我通过监听返回事件，自动同步维护的历史记录。这样无论用什么方式返回，体验都是一致的。</p> <pre class="language-javascript"><!></pre> <p>另外为了避免页面刷新导致状态丢失，返回时使用的是 SPA 路由跳转而不是直接改变网址。用户感知不到这个差别，但技术上保证了流畅性。</p> <h2 id="开发了一款-zed-theme"><a class="anchor-link not-prose" href="#开发了一款-zed-theme">开发了一款 Zed Theme</a></h2> <p><a href="https://github.com/QuarkPixel/Vynora" rel="nofollow">Vynora</a> 这款主题是我自己在 <a href="https://monokai.pro/" rel="nofollow">Monokai</a> 的基础上改的，用了有一段时间了。前两天把他上架到了 <a href="https://zed.dev/extensions/vynora" rel="nofollow">Zed Extensions</a>。</p> <p>修改这款主题的契机有以下几点<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>：</p> <ul><li>原版的红色关键字可读性太差了，当时测量过<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E9%A1%B5%E9%A2%9C%E8%89%B2#%E9%A2%9C%E8%89%B2%E5%AF%B9%E6%AF%94%E5%BA%A6" rel="nofollow">对比度</a>只有 <code>3.84:1</code> <sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup></li> <li>其他颜色（如蓝色）也过于轻浮，很像老师珍藏了十年的 PPT 里用的文字颜色</li> <li>分不清主次，代码层级不清晰</li></ul> <p><!> <em>原版 Monokai-og 截图</em></p> <p>因此自己的修改版本 Vynora 也就应运而生了。相较于原版，颜色更加浑厚复古，辨识度也更好。要说的再玄乎一点的话，感觉自己的版本更有 Jazzy 的味道 🤓</p> <p><!> <em>Vynora 截图</em></p> <p>欢迎下载体验～</p> <div class="footnotes"><hr> <ol><li id="fn-1">本站目前正在使用的中文字体<a href="#fnref-1" class="footnote-backref">↩</a></li> <li id="fn-2">鉴于Monokai版本众多且不一，这里只针对Zed上的 <a href="https://zed-themes.com/themes/monokai-og?name=Monokai-og" rel="nofollow">Monokai-og</a>。<a href="#fnref-2" class="footnote-backref">↩</a></li> <li id="fn-3">正常来说常规的文本对比度应不小于 <code>4.5:1</code><a href="#fnref-3" class="footnote-backref">↩</a></li></ol></div>',1);function z(h,u){const m=A(u,["children","$$slots","$$events","$$legacy"]);B(h,M(()=>m,r,{children:(g,V)=>{var p=E(),l=o(y(p),22);P(l,{children:(_,L)=>{var v=x();i(_,v)},$$slots:{default:!0}});var e=o(l,16),k=s(e);$(k,()=>`<code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePopState</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`),n(e);var a=o(e,12),b=s(a);d(b,{src:"/img/logs/0xb5c-0.png",alt:"原版截图"}),t(2),n(a);var c=o(a,4),w=s(c);d(w,{src:"/img/logs/0xb5c-1.png",alt:"Vynora 截图"}),t(2),n(c),t(4),i(g,p)},$$slots:{default:!0}}))}const F=Object.freeze(Object.defineProperty({__proto__:null,default:z,metadata:r},Symbol.toStringTag,{value:"Module"}));export{F as _};
