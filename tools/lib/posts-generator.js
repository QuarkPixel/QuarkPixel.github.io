import fs from 'fs';
import path from 'path';

// @ts-ignore
export function generatePostsFile(projectRoot) {
  const postsDir = path.join(projectRoot, 'posts');
  const files = fs.readdirSync(postsDir).filter(file => file.endsWith('.md'));
  const posts = files.map(file => file.replace('.md', ''));

  const output = `// Auto-generated by posts-generator
export const posts = ${JSON.stringify(posts, null, 2)};
`;

  const outputPath = path.join(projectRoot, 'src/lib/posts.js');
  fs.writeFileSync(outputPath, output);
  console.log('âœ¨ Generated src/lib/posts.js');
} 