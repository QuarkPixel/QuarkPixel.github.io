@import url('https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css');
@import url('./code-highlight.css');

.prose {
	word-break: auto-phrase;

	code:not(pre code) {
		font-size: smaller;
	}

	& > details > summary {
		font-size: smaller;
		opacity: 0.8;
	}

	:where(a):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
		text-decoration: none;
		position: relative;
		color: var(--tw-prose-body);

		$scale: 0.075;
		$width: 8em * $scale;
		$height: 5em * $scale;
		$neg-width: -8em * $scale;
		$bottom: -5em * $scale;

		&::after {
			content: '';
			position: absolute;
			left: 0;
			bottom: $bottom;
			width: 100%;
			height: $height;
			pointer-events: none;

			mask-image: url('/assets/wave.svg');
			mask-repeat: repeat-x;
			mask-size: $width $height;
			background-color: color-mix(in oklab, var(--tw-prose-body) 30%, transparent);
			transition: background-color 0.1s ease-in-out;
			animation: wavy 0.3s linear infinite;
			animation-play-state: paused; /* 默认暂停 */
		}

		&:hover::after {
			background-color: var(--color-secondary-500);
			animation-play-state: running; /* 悬停时运行动画 */
		}

		@keyframes wavy {
			0% {
				mask-position: 0 0;
			}
			100% {
				mask-position: $neg-width 0; /* 与 background-size 的宽度一致 */
			}
		}
	}

	em {
		font-family: var(--font-noto-sans);
		font-size: smaller;
		&::after {
			content: '';
			display: inline-block;
			width: 0.2rem;
		}
	}

	.anchor-link {
		font: inherit;
		color: inherit;
		text-decoration: inherit;
		position: relative;

		&::before {
			content: '#';
			position: absolute;
			left: -1em;
			font-family: var(--font-caveat);
			opacity: 0;
			transition: 0.2s;
			padding-right: 1em;
			pointer-events: none;
		}

		&:hover::before {
			opacity: 0.4;
		}
	}
}
