@use '$lib/styles/wave.scss' as wave;
@import url('https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css');
@import url('./code-highlight.css');

.prose {
	/* word-break: auto-phrase; */
	text-align: justify;
	quotes: '「' '」' '『' '』';
	hanging-punctuation: first last;

	code:not(pre code) {
		font-size: smaller;
	}

	& > details > summary {
		font-size: smaller;
		opacity: 0.8;
	}

	:where(a):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
		text-decoration: none;
		color: var(--tw-prose-body);

		@include wave.auto-theme();
	}

	em {
		font-family: var(--font-noto-sans);
		font-size: smaller;
		font-synthesis: style;

		&::after {
			content: '';
			display: inline-block;
			width: 0.2rem;
		}
	}

	del {
		opacity: 0.5;
	}

	p {
		font-feature-settings: 'lnum';
	}

	iframe {
		width: 100%;
		height: auto;
		aspect-ratio: 16 / 9;
		border-radius: 0.25rem;
	}

	.anchor-link {
		font: inherit;
		color: inherit;
		text-decoration: inherit;
		position: relative;

		&::before {
			content: '#';
			position: absolute;
			left: -1em;
			font-family: var(--font-caveat);
			opacity: 0;
			transition: 0.2s;
			padding-right: 1em;
			pointer-events: none;
		}

		&:hover::before {
			opacity: 0.4;
		}
	}
}

.libra-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	padding: 1rem;
	transition: ease-in-out;

	backdrop-filter: blur(1rem);

	display: flex;
	justify-content: center;
	align-items: center;

	cursor: pointer;
	z-index: 2;

	background-color: color-mix(in oklch, var(--color-background) 30%, transparent);
	--dot-color: color-mix(in oklch, var(--color-surface-950-50) 5%, transparent);
	background-image: radial-gradient(var(--dot-color) 2px, transparent 0);
	background-size: 14px 14px;
}

.libra-overlay.libra-visible {
	opacity: 1;
}

.libra-overlay.libra-hidden {
	opacity: 0;
	pointer-events: none;
}

.libra-shadow {
	position: absolute;
	transition: 200ms;
	z-index: 3;
	border-radius: var(--radius-xl);
}

.libra-shadow.open {
	box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
	border-radius: var(--radius-sm);
}
