<!doctype html>
<html lang="zh-cn" data-theme="hsuan">
<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../favicon/default.png" type="image/png" />
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0" />
	<meta name="google-site-verification" content="7z3kFWsiELnfEkWYFIbxk5fDUCI8EBFQar82cE_jt_8" />
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/ > -->
	<title>Hsuan's Space</title>
	
		<link href="../_app/immutable/assets/0.BBJADh7x.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.DGC7Ixsx.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D5JusCWk.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dn7kmhKU.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/55DTsrXR.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/cJOcSlm5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CYgJF_JY.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.Bw1kP8el.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dp1pzeXC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CWj6FrbW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Bxg84u-P.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/0V-weUyZ.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.BOs6hxH8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BheWnx7M.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/PB-FJpp_.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/PD1Wq3xD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dv3sjCI-.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/2LSbsVY0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/1n_NDudY.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DvpkVvb5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/TAnICSW8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/wklvEFpS.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BEYSVr-f.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BGGTUj09.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BQYgV865.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BMnMWXzj.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dw-omCbI.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/5.Cm1IoREi.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DK3p7Ma_.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BoVWJXks.js"><!--[--><meta name="description" content="Welcome to Hsuan's personal space - A collection of thoughts, experiences, and creative works by Xuancong Meng."> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="robots" content="index, follow"> <meta property="og:title" content="Hsuan's Space"> <meta property="og:description" content="A collection of thoughts, experiences, and creative works by Xuancong Meng."> <meta property="og:type" content="website"> <link rel="alternate" type="application/rss+xml" title="RSS Feed for Hsuan's Space" href="/feed/rss.xml"> <link rel="alternate" type="application/atom+xml" title="Atom Feed for Hsuan's Space" href="/feed/atom.xml"> <link rel="alternate" type="application/json" title="JSON Feed for Hsuan's Space" href="/feed/feed.json"><!--]--><!--[--><script>
		(function() {
			const savedTheme = sessionStorage.getItem('theme-mode');
			const isDark = savedTheme ? savedTheme === 'dark' : window.matchMedia('(prefers-color-scheme: dark)').matches;
			document.documentElement.setAttribute('data-mode', isDark ? 'dark' : 'light');
		})();
	</script><!----><!--]--><!--[--><meta name="description" content="安全,只,是,它,的, S,ide Effects - Xuancong Meng"> <meta name="author" content="Xuancong Meng"> <meta name="keywords" content="Rust"> <meta property="og:title" content="我从未将 Rust 视作一门「安全」的语言 - Hsuan's Blog"> <meta property="og:description" content="安全,只,是,它,的, S,ide Effects"> <meta property="og:type" content="article"> <meta property="article:author" content="Xuancong Meng"> <meta property="article:published_time" content="Fri May 23 2025 00:00:00 GMT+0000 (Coordinated Universal Time)"> <meta property="article:tag" content="Rust"><!--]--><title>我从未将 Rust 视作一门「安全」的语言 - Hsuan's Blog</title>
</head>
<body data-sveltekit-preload-data="hover">
<div class="sveltekit-body"><!--[--><!--[--><!----><div class="main min-h-[100vh] flex flex-col relative snap-end"><div class="header relative px-[20px] py-1.5 md:py-3 svelte-oxgzw2" style="--noise-size: 50px;"><div class="svelte-oxgzw2"><div class="grow flex items-end gap-1 md:gap-4"><a href="/" class="hidden sm:block scale-75 md:scale-100"><svg class="h-[30px] w-[40px]" style="transform: scale(1.2)" width="58" height="44" viewBox="0 0 58 44" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.618652 41.6084C1.50667 41.6084 2.25342 41.5781 2.85889 41.5176C3.48454 41.4368 4.00928 41.3258 4.43311 41.1846C4.85693 41.0231 5.21012 40.8213 5.49268 40.5791C5.77523 40.3369 6.01742 40.0544 6.21924 39.7314L17.63 21.66L27.925 5.35916L26.794 3.46387L6.76102 3.46387L1.95068 3.46387V1.10254H34.5854V3.46387H29.7417L38.7026 18.4795L47.2095 5.25C47.27 5.16927 47.3003 5.03809 47.3003 4.85645C47.3003 4.59408 47.159 4.38216 46.8765 4.2207C46.6141 4.03906 46.2407 3.89779 45.7563 3.79688C45.272 3.67578 44.6867 3.59505 44.0005 3.55469C43.3345 3.49414 42.5978 3.46387 41.7905 3.46387V1.10254H55.8979V3.46387C55.0099 3.46387 54.2531 3.50423 53.6274 3.58496C53.0018 3.66569 52.4771 3.78678 52.0532 3.94824C51.6294 4.08952 51.2762 4.28125 50.9937 4.52344C50.7313 4.74544 50.4992 5.0179 50.2974 5.34082L40.3071 21.1738L52.5376 41.6084H57.3813V44H24.7466V41.6084H29.5601L19.2368 24.3525L9.27686 39.8828C9.21631 39.9837 9.18604 40.0947 9.18604 40.2158C9.18604 40.4984 9.31722 40.7305 9.57959 40.9121C9.86214 41.0736 10.2456 41.2148 10.73 41.3359C11.2345 41.4368 11.8198 41.5075 12.4858 41.5479C13.172 41.5882 13.9188 41.6084 14.7261 41.6084V44H0.618652V41.6084Z" fill="currentColor"></path><path d="M27.925 5.35916L26.794 3.46387L6.76102 3.46387L17.63 21.66L27.925 5.35916Z" fill="currentColor" fill-opacity="0.8"></path><!--[--><path d="M11.7642 3.46387L15.7642 3.46387L38.5312 41.61L34.5312 41.61Z" fill="#309898"></path><path d="M15.7642 3.46387L19.7642 3.46387L42.5312 41.61L38.5312 41.61Z" fill="#FE9F0D"></path><path d="M19.7642 3.46387L23.7642 3.46387L46.5313 41.61L42.5312 41.61Z" fill="#F4631E"></path><path d="M23.7642 3.46387L26.794 3.46387L49.5586 41.61L46.5312 41.61Z" fill="#D92E10"></path><!--]--></svg><!----></a> <!--[!--><div class="flex gap-1"><!--[--><a href="/" class="link h6 leading-4 hover:text-primary-700-300   svelte-oxgzw2">Blog Space</a><a href="/about" class="link h6 leading-4 hover:text-secondary-700-300   svelte-oxgzw2">About Me</a><!--]--></div><!--]--></div> <div class="flex h-[26.88px] items-center sm:gap-4 sm:flex"><!--[--><div class="flex h-full"><a class="group chip text-surface-contrast-50-950 bg-background h-full rounded-full hidden sm:inline-flex svelte-164k0ge" href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="开往-友链接力"><div class="icons svelte-164k0ge"><div class="logo svelte-164k0ge"><!--[!--><!--]--><!----></div> <div class="arrow svelte-164k0ge"><!--[!--><!--]--><!----></div></div> <span class="desc-wrapper pointer-events-none svelte-164k0ge"><div class="desc svelte-164k0ge">Travelling</div></span></a><!----></div><!--]--> <div class="flex items-center gap-2 rounded-full hidden sm:inline-flex" style="opacity: 0"><!--#s1--><label data-scope="switch" data-part="root" data-state="unchecked" id="switch:s1" for="switch:s1:input" class="inline-flex items-center gap-4 " data-testid="switch"><input id="switch:s1:input" type="checkbox" aria-labelledby="switch:s1:label" name="mode" value="on" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;word-wrap:normal;" data-testid="switch-input"> <span data-scope="switch" data-part="control" data-state="unchecked" id="switch:s1:control" aria-hidden="true" class="cursor-pointer transition duration-200 preset-filled-surface-200-800  w-10 h-6 p-0.5 rounded-full hover:brightness-90 dark:hover:brightness-110  bg-surface-950/30" data-testid="switch-control"><span data-scope="switch" data-part="thumb" data-state="unchecked" id="switch:s1:thumb" aria-hidden="true" class="right-0 aspect-square h-full flex justify-center items-center text-right cursor-pointer preset-filled-surface-50-950 rounded-full transition ease-in-out duration-200 bg-background" data-testid="switch-thumb"><!--[--><span class="pointer-events-none" data-testid="switch-icon-inactive"><!--[!--><!--]--><!----></span><!--]--> <!--[!--><!--]--></span></span> <!--[!--><!--]--></label><!----></div><!----> <!--#s2--><span class=" h-4/5 flex sm:hidden" data-testid="popover"><!--[--><button data-scope="popover" data-part="trigger" type="button" id="popover:s2:trigger" aria-haspopup="dialog" data-state="closed" aria-controls="popover:s2:content" class="btn px-2 hover:preset-tonal  " aria-label=""><!--[!--><!--]--><!----></button><!--]--> <div id="popover:s2:popper" data-scope="popover" data-part="positioner" style="position:absolute;isolation:isolate;min-width:max-content;pointer-events:none;top:0px;left:0px;transform:translate3d(0, -100vh, 0);z-index:var(--z-index);" class=" "><!--[!--><!--]--></div></span><!----></div></div></div><!----> <div class="flex-1 flex flex-col items-center justify-center py-5"><!----><!----><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"> <article class="prose lg:prose-xl my-4 max-w-[80%]"><header class="mb-10"><h1 class="mb-2"><!--[--><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">我</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">从</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">未</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">将</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class=""> R</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">ust</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class=""> 视作</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">一</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">门</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">「安全」</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">的</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">语言</span><!--]--><!----></h1> <div class="font-noto-sans text-sm lg:text-base opacity-70"><!--[--><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">安全</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">只</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">是</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">它</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">的</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class=""> S</span><span style="word-break: keep-all; overflow-wrap: anywhere;" class="">ide Effects</span><!--]--><!----></div> <div class="flex justify-between my-4"><!--[--><div class="flex items-center gap-2"><!--[--><div class="bg-secondary-500/40 text-secondary-950-50 text-sm font-caveat rounded px-2 whitespace-nowrap">Rust</div><!--]--></div><!--]--><!----> <div class="flex gap-4 font-[Georgia] oldstyle-nums text-sm lg:text-base opacity-80">Xuancong Meng <time datetime="Fri May 23 2025 00:00:00 GMT+0000 (Coordinated Universal Time)">5/23/2025</time></div></div> <hr class="mt-4 mb-0"></header> <div class="mb-10"><p>每每在社交平台上看到有关 Rust 的内容，「内存安全」和「类型安全」总是如影随形，仿佛这是 Rust 的全部定义。Rust 似乎被贴上了一个光鲜的标签：安全语言。它的官网宣称「丰富的类型系统和所有权模型保证内存安全和线程安全」，社区也乐此不疲地传颂它的可靠性。然而，我从未将 Rust 视为一门「安全」的语言。安全，只是 Rust 独特设计带来的副作用，而非它的核心目标。Rust 的真正魅力，远不止于此。</p> <p>在这篇文章中，我将从 Rust 的设计哲学出发，剖析安全特性如何作为副作用自然浮现；探讨为何「安全」标签被官方和社区共同放大；并揭示 Rust 在性能、表达力和灵活性上的多面价值。我希望你能放下对「安全」的刻板印象，重新审视这门语言。</p> <h2 id="安全从何而来"><a class="anchor-link" href="#安全从何而来">安全从何而来？</a></h2> <p>Rust 诞生于 Mozilla，旨在解决 C++ 在系统编程中的痛点：手动内存管理复杂、并发问题难以调试、错误排查耗时。它的核心设计——所有权模型、借用检查器和生命周期——并非为了追求「安全」，而是为了让开发者能够编写可靠、高效的系统级代码。这些机制的细节可以在 <a href="https://doc.rust-lang.org/book/" rel="nofollow">Rust 官方书籍</a> 中找到，但其核心思想很简单：通过编译时规则，确保内存和并发行为的正确性。</p> <p>所有权模型规定，每个值有且仅有一个所有者，值在作用域结束时自动销毁。这消除了 C++ 中手动释放内存的负担，同时避免了悬垂指针和双重释放。借用检查器进一步通过引用规则（不可变借用与可变借用互斥）约束内存访问，防止数据竞争。生命周期则确保引用的有效性，避免引用失效。这些机制共同构成了 Rust 的编译时保障体系，杜绝了空指针、缓冲区溢出等常见错误。</p> <p>但这些规则的初衷是什么？不是为了让开发者炫耀「我的代码内存安全」，而是为了解放我们，让我们专注于程序逻辑而非调试内存泄漏或线程死锁。安全，只是这些设计的副作用就。像健康饮食可能带来体重控制，Rust 的设计目标是可靠性和性能，安全是实现这些目标的自然结果。官方虽然强调「内存安全和线程安全」，但更突出「赋予每个人构建可靠且高效软件」的愿景。<strong>安全是手段，而非目的。</strong></p> <h2 id="unsafe语法层面的注释"><a class="anchor-link" href="#unsafe语法层面的注释">Unsafe：语法层面的注释</a></h2> <p>如果 Rust 的安全特性是其设计的全部，为何它还提供了 <code>unsafe</code> 关键字？其实这个问题很好回答。毕竟作为一个系统级的编程语言，对底层的可操控性和 Python 一样、或者语法像 C++ 一样灵活好像都不那么合适。因此引入了这样一个「乍看奇怪，实则合理」的产物。</p> <p>我对 <code>unsafe</code> 的理解是，它是一种降低开发者心智负担的工具。在非 <code>unsafe</code> 代码中，Rust 的所有权模型和借用检查器充当守门人，自动防止内存泄漏、数据竞争或空指针错误。开发者无需时刻担心变量生命周期或指针合法性，编译器会在错误发生前报错。这种「默认安全」让开发者专注于逻辑而非内存管理。然而，当需要与硬件交互或优化性能时，unsafe 就像一个路标，提醒开发者：「这里要小心。」它要求明确声明责任，划定安全与非安全的边界。</p> <p>与 C++ 不同，C++ 要求开发者时刻保持警惕，而 Rust 的 unsafe 将高风险操作隔离到特定代码块，让开发者在大多数时候可以「偷懒」，仅在必要时全神贯注。这种设计平衡了安全与灵活性，体现了 Rust 的实用主义：通过编译时约束最大化可靠性，同时保留系统编程的控制力。unsafe 不是对安全的妥协，而是对开发者的信任，提醒他们在自由与责任间选择。安全，仍是 Rust 优化心智负担的副作用，而非绝对目标。</p> <h2 id="再谈为何安全被放大"><a class="anchor-link" href="#再谈为何安全被放大">再谈为何「安全」被放大</a></h2> <p>「安全」成为 Rust 的代名词，源于官方的宣传以及社交媒体上越发趋于给一个事物打“标签”。现在的编程语言市场已经趋于饱和，对于新兴语言来说，极力需要一个“卖点”来推销自己。对于官方来说，「安全」就是那个卖点。而对于社交媒体来说，没有一个词可以比「安全」这样一个简洁有力的词来概括一门语言了。因此社交媒体上的这种做法，是极其不负责任的。</p> <p>但“安全”标签带来了认知偏差，让 Rust 被简化为“防御性”语言，掩盖其性能和表达力的优势。借用检查器的严格性让新手望而却步，凸显安全并非免费。作为程序员，我们应跳出“安全”这个人云亦云的概念，更加客观、更加全面的去了解一件事物。</p> <h2 id="安全之外"><a class="anchor-link" href="#安全之外">安全之外</a></h2> <p>如果安全只是副作用，Rust 的真正价值是什么？答案在于它的多面性：性能、表达力和灵活性的完美平衡。</p> <p>首先，Rust 的性能接近 C++，得益于其零成本抽象（Zero-Cost Abstractions）。它没有运行时或垃圾回收器，编译器通过优化（如内联、循环展开）确保代码高效运行。这使得 Rust 在高性能场景（如 <a href="https://developer.mozilla.org/en-US/docs/WebAssembly/Rust_to_wasm" rel="nofollow">WebAssembly</a>、嵌入式系统）中大放异彩。</p> <p>其次，Rust 的类型系统和宏系统提供了强大的表达力。枚举和模式匹配让复杂逻辑更加简洁优雅；<a href="https://doc.rust-lang.org/book/ch20-05-macros.html" rel="nofollow">声明式宏</a>（<code>macro_rules!</code>）和过程宏支持元编程，极大地减少样板代码。这些特性让 Rust 代码不仅可靠，还充满美感，吸引了追求代码艺术的开发者。</p> <p>最后，Rust 的灵活性使其超越了传统系统编程语言的范畴。它支持多种编程范式（函数式、面向对象），适用于从区块链到 AI 的广泛领域。例如，Discord 使用 Rust 优化后端，AWS 的 Firecracker 虚拟化技术也依赖 Rust 的高性能和可靠性。这些案例虽非重点，但足以证明 Rust 的通用性。</p> <p>安全只是 Rust 的敲门砖。它的真正魅力在于，它让开发者在性能、可靠性和表达力之间找到平衡。你可以编写接近硬件的低级代码，也可以构建抽象层次高、逻辑清晰的高级系统，而不必被内存管理或并发问题拖累。Rust 不是“安全的 C++”，而是一门重新定义系统编程的语言。</p> <h2 id="重新定义-rust-的价值"><a class="anchor-link" href="#重新定义-rust-的价值">重新定义 Rust 的价值</a></h2> <p>Rust 的魅力远不止「安全」二字。它以所有权模型和编译时检查为开发者卸下内存管理的重担，却从不以安全为唯一目标。性能、表达力与灵活性的融合，让 Rust 成为系统编程的新标杆。放下「安全语言」的刻板标签，我们应重新审视 Rust 的初心：赋予开发者自由与掌控力，构建可靠而高效的未来。无论是优化性能的极致追求，还是优雅代码的艺术表达，Rust 都以其独特的设计，邀请我们探索系统编程的无限可能。</p><!----></div> <!--[--><div class="text-end text-sm font-noto-serif opacity-50">© 2025
			Xuancong Meng</div><!--]--> <div class="min-h-[372px] my-15"><!--[!--><!--]--></div><!----></article><!----><!----><!----></div></div> <footer class="py-6 text-xs sm:text-sm flex flex-col items-center gap-2 snap-end font-gravitas-one"><div class="flex gap-4 text-surface-800-200 whitespace-nowrap"><!--[--><a href="/privacy" class="hover:text-primary-700-300" target="_self">Privacy Policy</a> <!--[-->/<!--]--><a href="/feed/rss.xml" class="hover:text-secondary-700-300" target="_blank">RSS</a> <!--[-->/<!--]--><a href="https://github.com/QuarkPixel/QuarkPixel.github.io" class="hover:text-primary-700-300" target="_blank">Source Code</a> <!--[!--><!--]--><!--]--></div> <div class="text-center font-noto-serif text-surface-600-400">Powered by <a href="https://svelte.dev" target="_blank" rel="noopener noreferrer">Svelte</a> ·
		Designed by <a href="https://github.com/QuarkPixel" target="_blank" rel="noopener noreferrer">QuarkPixel</a></div></footer><!----> <div class="bg-surface-800-200 text-surface-50-950 bottom-0 z-0 overflow-hidden relative" style="height: 36px; filter: brightness(1);"><div class="relative" style="top: 0px;"><div class="group flex gap-[1rem] overflow-hidden font-gravitas-one motion-reduce:overflow-auto relative select-none flex-row" style="mask-image: none;
	  -webkit-mask-image: none;
	  "><!--[--><div class="flex justify-around gap-[1rem] [--gap:1rem] shrink-0 animate-marquee-left flex-row"><!----><div>All content copyright by Xuancong Meng, unless otherwise noted.</div> <div>Reproduction without permission of the original author is prohibited.</div> <div>© Xuancong Meng 2025</div><!----></div><div class="flex justify-around gap-[1rem] [--gap:1rem] shrink-0 animate-marquee-left flex-row"><!----><div>All content copyright by Xuancong Meng, unless otherwise noted.</div> <div>Reproduction without permission of the original author is prohibited.</div> <div>© Xuancong Meng 2025</div><!----></div><!--]--></div><!----></div></div><!----> <!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_29173k = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.DGC7Ixsx.js"),
						import("../_app/immutable/entry/app.Bw1kP8el.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>
</html>
